<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Tiger Table OBS</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>body { background: #020617; padding: 40px; font-family: sans-serif; }</style>
</head>
<body>
    <div class="max-w-5xl mx-auto bg-blue-900/90 border-t-8 border-blue-400 rounded-b-3xl shadow-2xl overflow-hidden">
        <div class="bg-blue-600 py-6 text-center text-white border-b border-blue-400/30">
            <h1 class="text-4xl font-black italic uppercase tracking-widest">Leaderboard</h1>
        </div>
        <table class="w-full text-right text-white">
            <thead>
                <tr class="bg-blue-800/50 text-blue-200 uppercase text-sm font-black h-14 border-b border-blue-700">
                    <th class="p-4 pr-10">#</th><th className="p-4">Team</th><th class="p-4 text-center">Kills</th><th class="p-4 text-center">Points</th>
                </tr>
            </thead>
            <tbody id="table-body"></tbody>
        </table>
    </div>
    <script>
        const socket = io('https://tiger-panel.onrender.com');
        socket.on('gameState', (data) => {
            if (data && data.teams) {
                const container = document.getElementById('table-body');
                const sorted = [...data.teams].sort((a, b) => (b.totalTournamentScore + b.currentGameKills) - (a.totalTournamentScore + a.currentGameKills));
                container.innerHTML = sorted.map((t, i) => `
                    <tr class="border-b border-blue-800/30 h-16 font-bold">
                        <td class="p-4 pr-10 font-black text-blue-400 italic text-3xl">#${i + 1}</td>
                        <td class="p-4 font-black text-2xl uppercase italic">${t.name}</td>
                        <td class="p-4 text-center font-mono text-2xl text-blue-200">${t.currentGameKills}</td>
                        <td class="p-4 text-center font-black text-4xl text-yellow-400 font-mono">${t.totalTournamentScore + t.currentGameKills}</td>
                    </tr>
                `).join('');
            }
        });
    </script>
</body>
</html>